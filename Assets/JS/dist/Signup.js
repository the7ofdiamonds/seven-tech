import{a as y,h as C,r as a,j as e}from"./main.js";import{N as S}from"./NavigationLogin.js";import{d as p,a as h}from"./DisplayStatus.js";const v=createAsyncThunk("signup/signup",async(g,i,c)=>{try{const r=y();if(await C(r,i,c),await fetch("/wp-json/thfw/users/v1/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_login:g,user_email:i,user_password:c})}),!response.ok){const j=(await response.json()).message;throw new Error(j)}return await response.json()}catch(r){const t=r.code,d=r.message;return`Error (${t}): ${d}`}});function b(){const[g,i]=a.useState(""),[c,r]=a.useState(""),[t,d]=a.useState(""),[o,j]=a.useState(""),[x,l]=a.useState("Enter the username, email, and password of your choice to sign up."),[w,u]=a.useState("");a.useEffect(()=>{if(t!==""&&o!==""&&t===o){const s="You have successfully entered your password twice.";l(p(s)),u(h(s))}else if(t!==""&&t!==o){const s="You have not entered your password twice.";l(p(s)),u(h(s))}},[t,o]);const f=async s=>{s.preventDefault(),v(g,c,t).then(n=>{l(p(n)),u(h(n))}).then(()=>{setTimeout(()=>{window.location.href="/login"},5e3)}).catch(n=>{console.log(n.message),l(p(n.message)),u(h(n.message))})},m=s=>{s.target.name==="user-name"?i(s.target.value):s.target.name==="email"?r(s.target.value):s.target.name==="password"?d(s.target.value):s.target.name==="confirm-password"&&j(s.target.value)};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"signup",children:[e.jsx(S,{}),e.jsx("div",{className:"login card",children:e.jsx("form",{children:e.jsxs("table",{children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"text",name:"user-name",placeholder:"User Name",onChange:m,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",onChange:m,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",onChange:m,required:!0})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsx("input",{type:"password",name:"confirm-password",placeholder:"Confirm Password",onChange:m,required:!0})})})]}),e.jsx("tfoot",{children:e.jsx("td",{children:e.jsx("button",{type:"submit",onClick:f,children:e.jsx("h3",{children:"SIGN UP"})})})})]})})}),x!==""&&e.jsx("div",{className:`status-bar card ${w}`,children:e.jsx("span",{children:x})})]})})}export{b as default};
//# sourceMappingURL=Signup.js.map
